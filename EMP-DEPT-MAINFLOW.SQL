CONN SYS/123@//LOCALHOST:1523/ORCLDOCKER AS SYSDBA; 

ALTER SESSION SET "_ORACLE_SCRIPT" = TRUE;

DROP USER EMP_DEPT_MANAGEMENT CASCADE; 

CREATE USER EMP_DEPT_MANAGEMENT IDENTIFIED BY 123 QUOTA UNLIMITED ON USERS ;
GRANT CONNECT TO EMP_DEPT_MANAGEMENT; 
GRANT ALL PRIVILEGES TO EMP_DEPT_MANAGEMENT;
ALTER SESSION SET CURRENT_SCHEMA = EMP_DEPT_MANAGEMENT;



-- CREATE CLUSTER TABLE 
CREATE TABLE DEPT(
    DEPTNO NUMBER (5) PRIMARY KEY,
    DEPTNAME VARCHAR2(200) 
);

CREATE TABLE EMPL (
    EMPLNO NUMBER (5) PRIMARY KEY,
    EMPLNAME VARCHAR2(200) ,
    DEPTNO NUMBER(5) REFERENCES DEPT(DEPTNO)
);



-- CREATE 100 DEPARTMENT ; 
INSERT INTO DEPT (DEPTNO, DEPTNAME)
    SELECT 
        LEVEL * 10,
        'DEPT' || LEVEL
    FROM DUAL
    CONNECT BY LEVEL <= 100;

-- CREATE 4K EMPLOYEES; 
INSERT INTO EMPL (EMPLNO,EMPLNAME,DEPTNO)
    SELECT 
        TRUNC(LEVEL),
        'EMP'|| LEVEL, 
        TRUNC(DBMS_RANDOM.VALUE(1,101)) * 10
    FROM DUAL
    CONNECT BY LEVEL < 4000;
COMMIT;



